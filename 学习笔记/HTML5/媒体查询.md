# 媒体查询

​		媒体查询（`Media queries`），用于根据不同的设备类型或设备的不同特性定制不同的样式，是设计 **响应式布局** 的核心技术。简单来说，媒体查询就是浏览器先查询媒体的类型和特性，然后去样式表中匹配对应的样式。

​		`CSS2` 中引入了 `@media` 规则，它让为不同的媒体类型定义不同的样式规则成为可能。例如：您可能有一组用于计算机屏幕的样式规则、一组用于打印机、一组用于手持设备，甚至还有一组用于电视，等等。不幸的是，除了打印媒体类型之外，这些媒体类型从未得到过设备的大规模支持。

​		`CSS3` 的多媒体查询继承了 `CSS2` 多媒体类型的所有思想：取代了查找设备的类型，`CSS3` 根据设置的设备特性自适应显示。媒体查询可用于检测很多事情，例如：

- `viewport`（视窗） 的宽度与高度
- 设备的宽度与高度
- 朝向（智能手机的横屏与竖屏）
- 分辨率

​		目前很多针对苹果手机，`Android` 手机，平板等设备都会使用到多媒体查询。

```css
/* 如果浏览器窗口小于 600px, 背景将变为浅蓝色： */
@media only screen and (max-width: 600px) {
  	body {
    	background-color: lightblue;
  	}
}

/* 如果是横屏背景将是浅蓝色： */
@media only screen and (orientation: landscape) {
    body {
        background-color: lightblue;
    }
}
```



### 运算符

|   值   | 描述                                                         |
| :----: | :----------------------------------------------------------- |
| `and`  | 规定 `AND` 运算符，将媒体特性与媒体类型或其他媒体特性组合在一起。 |
| `not`  | 规定 `NOT` 运算符，排除掉某些特定的媒体类型及媒体特性。      |
|  `,`   | 规定 `OR` 运算符，列出可应用规则的媒体类型或媒体特性。       |
| `only` | 规定特定的媒体类型及媒体特性。                               |

<small>**注释：如果使用 `not` 或 `only`，则还必须指定媒体类型。**</small>



### 媒体类型

|      值      | 描述                                         |
| :----------: | :------------------------------------------- |
|    `all`     | 默认。适用于所有设备。                       |
|   `aural`    | 语音合成器。                                 |
|  `braille`   | 盲文反馈装置。                               |
|  `handheld`  | 手持设备（小屏幕，有限带宽）。               |
| `projection` | 投影仪。                                     |
|   `print`    | 打印预览模式/打印页面。                      |
|   `screen`   | 电脑屏幕。                                   |
|    `tty`     | 使用固定间距字符网格的电传打字机和类似媒体。 |
|     `tv`     | 电视类型的设备（低分辨率，有限的滚动能力）。 |



### 设备特性

|         属性          | 描述                                                         |
| :-------------------: | :----------------------------------------------------------- |
|        `width`        | 规定目标显示区域的宽度。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (min-width:500px)"` |
|       `height`        | 规定目标显示区域的高度。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (max-height:700px)"` |
|    `device-width`     | 规定目标显示器/纸张的宽度。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (device-width:500px)"` |
|    `device-height`    | 规定目标显示器/纸张的高度。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (device-height:500px)"` |
|     `orientation`     | 规定目标显示器/纸张的方向。可能的值：`"portrait"` 或 `"landscape"`。<br />例子： `media="all and (orientation: landscape)"` |
|    `aspect-ratio`     | 规定目标显示区域的宽高比。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (aspect-ratio:16/9)"` |
| `device-aspect-ratio` | 规定目标显示器/纸张的设备宽度/设备高度比率。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (aspect-ratio:16/9)"` |
|        `color`        | 规定目标显示器的每种颜色的位数。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (color:3)"` |
|     `color-index`     | 规定目标显示器可处理的颜色数。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (min-color-index:256)"` |
|     `monochrome`      | 规定单色帧缓冲区中每像素的位数。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="screen and (monochrome:2)"` |
|     `resolution`      | 规定目标显示器/纸张的像素密度（`dpi` 或 `dpcm`）。可以使用 `"min-"` 和 `"max-"` 前缀。<br />例子：`media="print and (resolution:300dpi)"` |
|        `scan`         | 规定电视显示器的扫描方法。可能的值是 `"progressive"` 和 `"interlace"`。<br />例子：`media="tv and (scan:interlace)"` |
|        `grid`         | 规定输出设备是网格还是位图。网格的可能值为 "1"，否则为 "0"。<br />例子：`media="handheld and (grid:1)"` |



### 实例演示

#### 在 `HTML` 中使用媒体查询

​		在 [`HTML`](https://developer.mozilla.org/zh-CN/docs/Web/HTML) 中，媒体查询可以应用于各种拥有 `media` 属性的元素：

- 在 `<link>` 元素的 [`media`](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/link#media) 属性中，它们定义了待应用链接资源（通常是 `CSS`）的媒体。
- 在 `<source>` 元素的 [`media`](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/source#media) 属性中，它们定义待应用源的媒体（这仅在 `picture` 元素内有效）。
- 在 `<style>` 元素的 [`media`](https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/style#media) 属性中，它们定义待应用样式的媒体。

#### 在 `JavaScript` 中使用媒体查询

​		在 [`JavaScript`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript) 中，可以使用 [`Window.matchMedia()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/matchMedia) 方法根据媒体查询测试窗口，还可使用 [`MediaQueryList.addListener()`](https://developer.mozilla.org/zh-CN/docs/Web/API/MediaQueryList/addListener) 在查询状态发生变化时收到通知。借助此功能，您的站点或应用可以响应设备配置、方向或状态的更改。

#### 示例

```html
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta charset="utf-8"> 
<title>菜鸟教程(runoob.com)</title> 
<style>
* {
    box-sizing: border-box;
}
.row:after {
    content: "";
    clear: both;
    display: block;
}
[class*="col-"] {
    float: left;
    padding: 15px;
}
html {
    font-family: "Lucida Sans", sans-serif;
}
.header {
    background-color: #9933cc;
    color: #ffffff;
    padding: 15px;
}
.menu ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
}
.menu li {
    padding: 8px;
    margin-bottom: 7px;
    background-color :#33b5e5;
    color: #ffffff;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
.menu li:hover {
    background-color: #0099cc;
}
.aside {
    background-color: #33b5e5;
    padding: 15px;
    color: #ffffff;
    text-align: center;
    font-size: 14px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
}
.footer {
    background-color: #0099cc;
    color: #ffffff;
    text-align: center;
    font-size: 12px;
    padding: 15px;
}
/* For desktop: */
.col-1 {width: 8.33%;}
.col-2 {width: 16.66%;}
.col-3 {width: 25%;}
.col-4 {width: 33.33%;}
.col-5 {width: 41.66%;}
.col-6 {width: 50%;}
.col-7 {width: 58.33%;}
.col-8 {width: 66.66%;}
.col-9 {width: 75%;}
.col-10 {width: 83.33%;}
.col-11 {width: 91.66%;}
.col-12 {width: 100%;}

@media only screen and (max-width: 768px) {
    /* For mobile phones: */
    [class*="col-"] {
        width: 100%;
    }
}
</style>
</head>
<body>
<div class="header">
	<h1>Chania</h1>
</div>

<div class="row">
    <div class="col-3 menu">
        <ul>
            <li>The Flight</li>
            <li>The City</li>
            <li>The Island</li>
            <li>The Food</li>
        </ul>
    </div>
    
    <div class="col-6">
        <h1>The City</h1>
        <p>Chania is the capital of the Chania region on the island of Crete. The city can be divided in two parts, the old town and the modern city.</p>
    </div>
    
    <div class="col-3 right">
        <div class="aside">
            <h2>What?</h2>
            <p>Chania is a city on the island of Crete.</p>
            <h2>Where?</h2>
            <p>Crete is a Greek island in the Mediterranean Sea.</p>
            <h2>How?</h2>
            <p>You can reach Chania airport from all over Europe.</p>
        </div>
    </div>
</div>

<div class="footer">
	<p>Resize the browser window to see how the content respond to the resizing.</p>
</div>
</body>
</html>
```

