### 过滤器

`vue2`过滤器，通常用来过滤文本，通过管道符`"|"`来调用，而它与设计理念不符，在`vue3`中被移除了。

使用：

- 首先将过滤处理程序整合到`Vue`配置对象的`filters`属性中，提供可调用的方法。
- 在需要过滤的地方使用管道符来调用处理程序，如：`{{hello world | fn}} // 处理数据 | 处理程序`
- 管道符`|`只能用在两个地方：`vue`指令绑定属性的地方和文本插值表达式`{{}}`中

处理：

- 过滤器会将`|`符前面的待处理文本作为第一个实参传递给过滤处理程序。
- 也可以在处理程序中手动传参，如：`{{待处理数据 | 处理程序(参数1，参数2)}}`
- 最终渲染处理后的结果，而不是待处理的文本。
- 还可以连续使用`|`调用不同的过滤器，来多层过滤数据。

案例：

```html
    <div id="app">
        <!-- vue2过滤器, 通过管道符进行调用  |         vue3废弃了 -->
        <p> {{txt | fn}} </p>
    </div> 

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <script>
        const vm = new Vue({
            el: "#app",
            data:{
                txt: "hello world"
            },
            // 局部定义过滤器处理程序
            filters:{ 
                fn(str){ // 第一个形参默认为待处理数据，系统自动传参，后面的参数供实参传递。
                    // console.log(str);   slice(开始位置，结束位置)
                    return str.charAt(0).toUpperCase() + str.slice(1, 3) // slice返回截取的片段
                }
            }
        })
    </script>
```

结果：<img src="第四节【脚手架】.assets/image-20220413112610849.png" alt="image-20220413112610849" style="zoom:80%;" /> 

废弃：`vue`不希望在`{{}}`中写入太多的`vue`代码或`JS`表达式，`vue3`中推荐使用计算属性，因此将`vue2`的过滤器移除了。

##### 全局与局部

局部定义：定义在`vue`实例配置对象中的方法，属于局部方法，一般只能在该实例挂载的入口元素中使用。

全局定义：直接在`Vue`构造器上定义的方法，属于`vue`的全局方法，任何一个入口元素都可使用。

##### 定义全局过滤器

定义：`Vue.filters(过滤器名，处理程序)`，如：`Vue.filters("fn", (str) => {})`

注意：在全局上定义过多的方法或属性，会造成全局的负担。因此，一般作用性强的方法才会被定义到全局。

`Vue`是一个类 / 构造函数，它既可以用来实例化`vue`对象，同时作为`vue`的全局来使用。

```js
// 打印Vue：
ƒ Vue (options) {
    if (!(this instanceof Vue)
    ) {
      warn('Vue is a constructor and should be called with the `new` keyword');
    }
    this._init(options);
  }
// 源码：
function Vue (options) {
    if (!(this instanceof Vue) {
      warn('Vue is a constructor and should be called with the `new` keyword');
    }
    this._init(options);
  }
```



# 脚手架

`vue`脚手架是一个提供基础环境的平台。

百科：脚手架是为了保证各施工过程顺利进行而搭设的工作平台。

单页面应用：

- `vue`是一个单页面应用，它的每一个项目只使用一个`HTML`页面，这个页面像一个应用程序一样。
- 每个组件有一段特定的路由，`vue`通过路由的切换，将指定的组件渲染到页面中，从而实现页面的变化。
- 它并不是切换页面，而是通过切换页面中的组件，来让页面发生变化。
- `vue`的每一个组件都是一个单独的文件，后缀为`".vue"`
- 这种页面的局部切换的设计，使得其项目性能远远优于原始项目的页面切换。

核心工具：

- `Vuex`：管理全局数据的工具
- `Vue Router`：路由插件
- `Vue` 服务端渲染

命令行工具`(Vue CLI)`

​		`Vue` 提供了一个`[官方的 CLI]`为单页面应用 `(SPA)` 快速搭建繁杂的脚手架。它为现代前端工作流提供了 `batteries-included` 的构建设置。只需要几分钟的时间就可以运行起来并带有热重载，保存时 `lint` 校验，以及生产环境可用的构建版本。 

`Vue CLI` 是一个用于快速 `Vue.js`开发的完整系统，提供：

- 项目脚手架：通过 `@vue/cli`实现的交互式的项目脚手架【具有热更新功能】

- 原型开发：通过`@vue/cli` + `@vue/cli-service-global`实现的零配置原型开发。
- 运行依赖项：一个运行时依赖`(@vue/cli-service)`，该依赖：
  - 可升级；
  - 基于 `webpack` 构建，并带有合理的默认配置；
  - 可以通过项目内的配置文件进行配置；
  - 可以通过插件进行扩展。
- 插件集合：一个丰富的官方插件集合，集成了前端生态中最好的工具。
- 管理界面：一套完全图形化的创建和管理`Vue.js`项目的用户界面。

`Vue CLI` 致力于将`Vue`生态中的工具基础标准化。它确保了各种构建工具能够基于智能的默认配置即可平稳衔接，这样你可以专注在撰写应用上，而不必花好几天去纠结配置的问题。与此同时，它也为每个工具提供了调整配置的灵活性，无需`eject`。

#### 安装脚手架【@vue/cli】

##### 查看各版本【view】

在命令行中输入：`npm view @vue/cli versions --json // 将@vue/cli的各个版本号以json的格式显示出来`

##### 安装4.5.15版

输入：`npm install -g @vue/cli@4.5.15 // 全局安装@vue/cli的4.5.15版本`【丸子亲测】

##### 检查版本号【-V】

输入：`vue -V // 检查安装版本号，正确显示版本号表示安装成功`【注意执行策略的问题】

##### 修改执行策略

管理员身份运行任一命令行工具，输入：`set-ExecutionPolicy RemoteSigned`，然后输入`Y`即可。

##### 使用脚手架创建项目【create】

输入：`vue create myapp // vue create 项目名（英文）`

##### 开始配置项目

第一步：输入`Y`确定

第二步：选择一个预设配置，方向键切换选择：`Manually select feature // 手动选择功能，自定义预设`

第三步：勾选功能添加到项目中，空格键勾选：

- `Choose Vue version // 自选Vue版本`
- `Bable // 打包，例如：将高版本打包为兼容的低版本`
- `CSS Pre-processors // CSS预处理器，如：sass，less`

第四步：选择创建`vue`的版本，`vue2`使用`2.x`，`vue3`使用`3.x`

第五步：选择`CSS`的预处理器，推荐使用`Less // 支持处理less的语法`

第六步：选择存储配置信息的位置，推荐`In dedicated config files // 存入专用的配置文件中`

第七步：以上配置是否保存为一个预设，`y`确定，`N`取消。输入`y`：

- 设置预设名：`Save preset as: wanziVue2`
- 选择下载相关配置的方式：推荐`Use NPM 使用npm`

##### 启动项目

切换到`Vue`项目的文件目录下，输入：`npm run serve// 启动当前项目`

选择访问地址：`App running at: - Local : http://localhost:8080/ - Network : url` 

还可以在当前项目的`package.json`记录文件中，打开调试，启动`VS Code`终端来自动运行。

##### 三个重要文件

`index.html`：`public`下的`index.html`文件，是当前项目的唯一页面文件。

```html
<!DOCTYPE html>
<html lang="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <!--入口元素-->
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>
```

`main.js`：`src`下的`main.js`文件，是当前项目的入口`js`文件。它将自身与另外两个重要的`index.html`和`App.vue`文件联系起来。

```js
// 导入组件
import Vue from 'vue' // 导入vue模块，使用vue语法
import App from './App.vue' // 导入App.vue文件，建立与APP.vue文件的关联
// 关闭打印台提示
Vue.config.productionTip = false
// 创建vue实例
new Vue({
  render: h => h(App), // 渲染APP.vue组件，render：渲染
}).$mount('#app') // 挂载到入口元素上，mount：挂载。建立与index.html文件的关联
```

`App.vue`：`src`下的`App.vue`文件，是当前项目的根组件。

```vue
// 组件的模板结构：HTML
<template> 
  <div id="app">
    <img alt="Vue logo" src="./assets/logo.png">
    <HelloWorld msg="Welcome to Your Vue.js App"/>
  </div>
</template>
// 组件的交互行为：JS
<script>
import HelloWorld from './components/HelloWorld.vue'
// 定义默认导出的内容
export default {
  name: 'App',
  components: {
    HelloWorld
  }
}
</script>
// 组件的样式：CSS
<style lang="less">
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
</style>
```

