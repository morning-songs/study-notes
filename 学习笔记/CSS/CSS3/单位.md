# 单位

​		一提及 `CSS` 单位，首先想到的可能是 `px`、`em` 之类的。 但其实，`CSS` 中的单位非常多，大致有如下六种。

<img src="images/%E5%8D%95%E4%BD%8D/CSS.png" alt="CSS" style="zoom: 45%;" />



### 长度单位

​		`CSS` 中的长度单位，多用于 `width`、`height`、`padding`、`margin`、`font-size` 等需要衡量长度或大小的 `CSS` 属性中。

​		长度是一个数字后跟一个长度单位，如 `10px`、`2em` 等。例如，使用 `px`（像素）设置不同的长度值：

```css
h1 {
  	font-size: 60px;
}

p {
  	font-size: 25px;
  	line-height: 50px;
}
```

​		数字和单位之间不能出现空格。但是，如果值为 `0`，则可以省略该单位。对于某些 `CSS` 属性，允许使用负长度。长度单位分为绝对长度单位和相对长度单位。

#### 绝对单位

​		绝对长度单位是固定的，以其中任何一个表示的长度都将始终显示为该大小，无论是在电脑屏幕还是手机屏幕上。

​		由于屏幕尺寸差异很大，不建议在屏幕上使用绝对长度单位。但是，如果输出介质已知，则可以使用它们，例如用于打印布局。

| 单位 |                        描述                         |
| :--: | :-------------------------------------------------: |
| `cm` |                 `centimeters`，厘米                 |
| `mm` |                 `millimeters`，毫米                 |
| `Q`  | `quarter-millimeters`，四分之一毫米，`1/4th of 1mm` |
| `in` |        `inches`，英寸，`1in = 96px = 2.54cm`        |
| `px` |        `pixels`，像素，`1px = 1/96th of 1in`        |
| `pt` |          `points`，点，`1pt = 1/72 of 1in`          |
| `pc` |            `picas`，派卡，`1pc = 12 pt`             |

​		像素（`px`）相对于设备屏幕。对于低 `PPI` 设备，`1px` 是显示器的一个设备像素，对于高分辨率屏幕 `1px` 表示多个设备像素。

##### `cm`

​		`cm` 表示厘米，是一个固定的长度。也就是说，无论在什么屏幕上，`1cm` 的长度始终都是 `1cm`。

```css
div {
    width: 10cm;
}
```

##### `mm`

​		`mm` 表示毫米。

```css
div {
    width: 100mm;
}
```

`Q`

​		`Q` 表示四分之一毫米。

```css
div {
    width: 100Q;
}
```

##### `in`

​		`in` 表示英寸。例如，有的电脑屏为 16 英寸，有的手机屏为 6 英寸。

```css
div {
    width: 16in;
}
```

##### `px`

​		`px` 表示 `CSS` 像素。

```css
div {
    width: 1200px;
}
```

​		像素可分为逻辑像素和物理像素，物理像素与设备相关，逻辑像素与设备无关。`CSS` 像素是与设备无关的逻辑像素。

​		物理像素是构成显示器或设备屏幕的最基本的点，它是屏幕上的一个光源，可发出红、绿、蓝三原色的光。物理像素是硬件的组成部分，其数量决定了显示设备的分辨率（显示设备上物理像素的数量，以屏幕的水平和垂直像素数来表示，如 `1920 x 1080`）。在不同屏幕上，物理像素的密度（像素每英寸，`PPI`）可以有所不同，其密度决定了显示的细节和清晰度，较高的像素密度能够呈现出更清晰和更细腻的图像。

​		逻辑像素（设备无关像素、`CSS` 像素）是一种相对单位，用于描述在屏幕上显示的图像和元素的大小。因为与设备无关，因此在不同的设备和屏幕分辨率下，逻辑像素的大小始终保持一致。所以，使用逻辑像素描述网页元素的大小和布局，在不同的设备上都能获得一致的显示效果。逻辑像素的主要优势就在于其在不同设备上的一致性和可预测性。

​		由于不同设备的像素密度不同，逻辑像素显示的大小会根据设备屏幕的像素密度进行缩放。在低像素密度设备上，一个逻辑像素对应一个物理像素；在高像素密度的设备上，一个逻辑像素会对应多个物理像素。因此，逻辑像素更适用于指定页面的布局和设计，而不是精确的屏幕物理尺寸。

​		逻辑像素和物理像素之间的关系是通过设备像素比（`DPR`）来确定的，`DPR` 表示在一个逻辑像素中所包含的物理像素的数量。例如在 `DPR` 为 2 的设备上，1 个逻辑像素由 4（2 x 2）个物理像素组成。

> DPI = 物理像素 / 逻辑像素，可通过 window.devicePixelRatio 查看。

​		实例：如果在 `DPR` 为 1 的屏幕上使用 `100px * 100px` 的图片刚好清晰显示，那么把该图片放到 `DPR` 为 2 的屏幕上则会变得模糊。因为原先用 `100px * 100px` 的图片占据屏幕上 100 x 100 个物理像素刚刚好，而将它放到 `DPR = 2` 的屏幕上，它要占据 200 x 200 个物理像素，此时图片就会看起来很模糊。解决的办法就是，找一张 `200px * 200px` 的图片来代替。

##### `pt`

​		`pt` 表示点。

```css
div {
    width: 12pt;
}
```

##### `pc`

​		`pc` 表示派卡，`1pc = 12pt`。

```css
div {
    width: 1pc;
}
```

#### 相对单位

​		相对长度单位指定相对于另一个长度属性的长度。 相对长度单位在不同的渲染介质之间可以缩放得更好。

|  单位  | 描述                                                  |
| :----: | :---------------------------------------------------- |
|  `em`  | 相对于元素的字体大小（`2em` 表示当前字体大小的 2 倍） |
| `rem`  | 相对于根元素的字体大小                                |
|  `ex`  | 相对于元素当前字体中小写字母 `x` 的高度（很少使用）   |
| `rex`  | 相对于根元素当前字体中小写字母 `x` 的高度（很少使用） |
|  `ch`  | 相对于数字 0 的宽度                                   |
|  `vw`  | 相对于视口宽度的 1%                                   |
|  `vh`  | 相对于视口高度的 1%                                   |
| `vmin` | 相对于视口宽度和高度中较小值的 1%                     |
| `vmax` | 相对于视口宽度和高度中较大值的 1%                     |

​		如果当前默认字体大小为 `16px`，则有 `1em = 16px`；若默认大小为 `14px`，则 `1em = 14px`。`em` 和 `rem` 单元在完美创建可扩展的布局方面非常实用！视口 = 浏览器窗口大小，如果视口为 50 厘米宽，则 `100vw = 50cm`。

​		`CSS` 中的相对单位又分为两大类：

- 字体相对单位：他们都是根据 `font-size` 来进行计算的。常见的字体相对单位有：`em`、`rem`、`ex`、`rex`、`ch`。
- 视口相对单位：他们都是根据视口大小来决定的。常见的视窗相对单位有：`vw`、`vh`、`vmax`、`vmin`。

##### `em`

​		`em` 是最常用的相对长度单位，适合基于特定的字号进行排版。根据 `CSS` 的规定，`1em` 等于当前元素的 `font-size` 属性的值。

```css
p {
    width: 10em; /* 200px */
    height: 1em; /* 20px */
	font-size: 20px;
    line-height: 1em; /* 20px */
}
```

​		元素没有设置字体大小时，会继承父元素的 `font-size`。因此，如果给多层嵌套的元素都使用 `em` 单位，就会增加计算的复杂度。

```html
<div>
    <p></p>
</div>
```

```css
body {
    font-size: 10px; /* 低于最低字号要求12px，最终显示时会被调整为12px */
}

div {
    font-size: 1.5em; /* 15px */
}

div>p {
    width: 10em; /* 150px */
    height: 1em; /* 15px */
    line-height: 1em; /* 15px */
}
```

​		当嵌套使用 `em` 时，其结果往往不好控制。因此，需要一个相对于固定值的长度单位，于是 `rem` 诞生了。

##### `rem`

​		`rem` 相对于文档根元素的字体大小，即 `<html>` 元素的 `font-size` 值，这样大大减小了计算的难度，有助于响应式页面的设计。

```css
html {
    font-size: 100px;
}

div {
    width: 3rem; /* 300px */
    padding: 0.05rem; /* 5px */
    font-size: 0.16rem; /* 16px */
}
```

​		为了实现响应式布局，通常需要使用如下脚本来计算应该给 `<html>` 元素设置多大的字体大小。

```js
(function () {
    function resizeBaseFontSize() {
        var rootHtml = document.documentElement,
            deviceWidth = rootHtml.clientWidth;
        if (deviceWidth > 640) {
            deviceWidth = 640;
        }
        /* 以 Iphone 12 Pro 为例 */
        rootHtml.style.fontSize = deviceWidth / 390 + "px"; // 得到比例值: 1rem = 1px
    }
    resizeBaseFontSize();
    window.addEventListener("resize", resizeBaseFontSize, false);
    window.addEventListener("orientationchange", resizeBaseFontSize, false);
})();
```

​		因此，当需要相对于一个固定长度来缩放长度时使用 `rem`，当希望长度相对于当前长度进行缩放时使用 `em`。

##### `ex`

​		`ex` 和 `ch` 都是排版用的单位，它们的大小取决于当前元素的 `font-size` 和 `font-family` 属性。

​		`ex` 是相对于当前字体中小写字母 `x` 的高度的一个相对长度单位。小写字母 `x` 的高度在各种字体中，一般占到字体大小的一半。因此，`1ex` 的具体大小是会随着字体（`font-family`）变化的。因为每种字体的小写 `x` 的高度是不一样的，所以增加结果的不确定性，也导致了这个单位很少使用。

```css
p {
    font-family: "Microsoft YaHei";
    font-size: 2ex; /* 由于字体大小存在偏差，稍大于1em */
}
```

##### `rex`

​		`rex` 则相对于根元素字体大小中小写 `x` 的高度。

```css
html {
    font-size: 16px;
}

div {
    font-size: 2rex; /* 17.2812px */
}
```

##### `ch`

​		`ch` 和 `ex` 类似，但它是基于数字 0 的宽度计算的，也会随着字体的变化而变化。数字 0 的宽度通常是字体的平均字符宽度，它是一个估计值。由于 `ch` 是一个近似等宽的单位，所以在设置容器的宽度时很有用，比如一个容器想要显示指定个数的字符串时，就可以使用这个单位。

```css
div {
    font-size: 14px;
    width: 3ch; /* 只容纳 3 个字符，汉字算 2 个字符 */
    white-space: nowrap;
    overflow: hidden;
}
```

##### `vw`

​		`vw`、`vh`、`vmin` 和 `vmax` 都是相对于视口尺寸进行自适应调整的。如果视窗大小发生了变化，那么这些值都会随之变化。

​		`1vw` 表示视口宽度的 1%，`vw` 是 `viewport width` 的缩写。

```css
div {
    width: 100vw; /* 占满视口 */
}
```

##### `vh`

​		`1vh` 表示视口高度的 1%，`vh` 是 `viewport height` 的缩写。

```css
div {
    height: 100vh; /* 占满视口 */
}
```

##### `vmin`

​		视口的宽高通常不同，因此可分为短边和长边。例如，在横屏设备上，视口宽度为长边，视口高度为短边；而在竖屏设备上，视口宽度为短边，视口高度为长边。长度相对于哪边，则刚好占满哪边。因此，这两个单位相对于横竖屏切换非常有用，使得元素能够始终铺满视口的一条边。

​		`1vmin` 表示视口短边尺寸的 1%。

```css
img {
    width: 100vmin; /* 图片宽度占满视口短边（横屏时是视高，竖屏时是视宽） */
}
```

##### `vmax`

​		`1vmax` 表示视口长边尺寸的 1%。

```css
img {
    width: 100vmax; /* 图片宽度占满视口长边（横屏时是视宽，竖屏时是视高） */
}
```

#### 浏览器支持

|              长度单位               | `Chrome` | `Edge` | `Firefox` | `Safari` | `Opera` |
| :---------------------------------: | :------: | :----: | :-------: | :------: | :-----: |
| `em, ex, %, px, cm, mm, in, pt, pc` |   1.0    |  3.0   |    1.0    |   1.0    |   3.5   |
|                `ch`                 |   27.0   |  9.0   |    1.0    |   7.0    |  20.0   |
|                `rem`                |   4.0    |  9.0   |    3.6    |   4.1    |  11.6   |
|              `vh, vw`               |   20.0   |  9.0   |   19.0    |   6.0    |  20.0   |
|               `vmin`                |   20.0   |  12.0  |   19.0    |   6.0    |  20.0   |
|               `vmax`                |   26.0   |  16.0  |   19.0    |   7.0    |  20.0   |



### 时间单位

​		`CSS` 中的时间单位有三个：分（`min`）、秒（`s`）和毫秒（`ms`），用于指定动画、过渡以及其他时间相关的属性。

```css
div {
    transition-duration: 5s;
}
```

​		需要注意的是，`CSS` 中的时间是相对于用户代理环境的实际时间，而不是计算机系统时间。因此，实际的动画或过渡效果的持续时间可能会受到浏览器或设备性能等因素的影响。

​		另外，还可以使用 % 来作为时间单位，它表示相对于父元素或包含块的持续时间。



### 频率单位

​		`CSS` 中的频率单位有两个：赫兹（`Hz`）和千赫兹（`kHz`）。通常情况下，频率单位使用在听或说的级联样式表中。频率可以被用来改变一个语音阅读文本的音调。低频率就是低音，高频率就是高音。

```css
.low { 
  	voice-pitch: 105Hz; 
} 

.squeal { 
  	voice-pitch: 135Hz; 
}
```

​		需要注意，当数值为 0 时，单位对值没有影响，但是单位是不能省略的。也就是说 0、`0Hz`、`0kHz` 是不一样的。所以，在使用频率单位时，不要直接写 0。另外，这两个单位是不区分大小写的。



### 分辨率单位

​		在 `CSS` 中，分辨率单位用于描述图像、背景图像和媒体查询中的像素密度。分辨率单位有三个：`dpi`、`dpcm`、`dppx`，他们都是正值，不允许为负值。

```
换算关系：1dppx = 96dpi; 1dpcm ≈ 2.54dpi
```

##### `dpi`

​		`dpi`（`dots per inch`）表示每英寸包含的点的数量。它用于指定位图图像的分辨率，或用于媒体查询的屏幕像素密度。普通屏幕通常包含 72 或 96 个点，大于 `192dpi` 的屏幕被称为高分屏。

```css
@media screen and (min-resolution: 96dpi) {
    /* ... */
}
```

##### `dpcm`

​		`dpcm`（`dots per centimeter`）表示每厘米包含的点的数量。它类似于 `dpi`，但是以厘米为单位衡量像素密度。在某些国际系统中，使用 `dpcm` 作为屏幕分辨率的单位更为常见。

```css
@media print and (min-resolution: 118dpcm) {
	/* ... */
}
```

##### `dppx`

​		`dppx`（`dots per pixel`）表示每像素包含点的数量。由于 `CSS` 像素的固定比率为 1 : 96，因此 `1dppx` 相当于 `96dpi`。对应的是`CSS` 中显示图像的默认分辨率，由 [图像分辨率](https://drafts.csswg.org/css-images-4/#propdef-image-resolution) 定义。

```css
@media screen and (min-resolution: 1dppx) and (max-resolution: 1.9dppx) {
    /* ... */
}
```

​		`dppx` 用于描述屏幕的像素密度，并指定图像或媒体查询中的像素相对于 `CSS` 像素的比率。一个 `dppx` 表示一个 `CSS` 像素等于一个物理像素。

​		与 `dpi` 或 `dpcm` 相比，`dppx` 更直接地反映了屏幕的像素密度，特别适用于响应式设计，以便在高分辨率设备上提供清晰的图像。在多设备和多屏幕尺寸的环境中，使用 `dppx` 也可以更准确地控制图像的显示效果。

​		要注意的是，`dppx` 仅在支持高分辨率显示的设备上才有效，在普通密度的屏幕上，`dppx` 单位将被视为等于 1。因此在使用 `dppx` 时，通常还需要提供备用的低分辨率图像，以保证在不同设备上都有适当的显示效果。

​		一个常见的例子是在 `CSS` 中指定高分辨率或 `Retina` 屏幕上的图像大小。如果要将一张 `1280px * 800px` 的图像显示在 `DPR = 2` 的 `Retina` 屏上，就可以在媒体查询中使用 `dppx` 单位来设置此图像在该 `Retina` 屏上以指定的大小显示。

```css
@media (resolution: 2dppx) {
    img {
        width: 320px;
        height: 200px;
    }
}
```

##### `x`

​		`x` 是 `dppx` 的别名。



### 角度单位

​		`CSS` 中的角度单位有四个：`deg`、`grad`、`rad`、`turn`。它们的换算关系如下：

> 90deg = 100grad = 0.25turn ≈ 1.570796326794897rad

​		一般这些角度单位用于元素的**旋转操作**，包括 `2D` 旋转、`3D` 旋转等。

- 当旋转值为正值时，元素会顺时针旋转；
- 当旋转值为负值时，元素会逆时针旋转。

​		通常情况下，一个完整的旋转就是 360 度。所以，所有的角度都在 0 - 360 度之间。但是，超出这个范围的值也是允许的，只不过都会归到 0-360 度之间。比如，顺时针旋转 450 度（`450deg`）、逆时针旋转 270 度（`-270deg`）、顺时针旋转 90 度（`90deg`）都是一样的效果，都会归为 `90deg`。但是当使用动画时，这些角度值就非常重要了。

​		`CSS` 的旋转主要依赖于 `transform` 属性中的 `rotate()` 、`rotate3d`、`skew()` 等方法。只需给它们传递旋转的角度即可。

​		除了旋转会使用角度之外，线性渐变也会经常使用角度值：

```css
background: linear-gradient(45deg, #000, #fff);
```

##### `deg`

​		`deg`（`Degress`）表示度，一个圆总共 360 度。

##### `grad`

​		`grad`（`Gradians`）表示梯度，一个圆总共 400 梯度。

##### `rad`

​		`rad`（`Radians`）表示弧度，一个圆总共 `2π` 弧度。

##### `turn`

​		`turn`（`Turns`）表示圈、转，一个圆总共一圈、一转。



### 百分比单位

​		百分比（%）也是我们比较常用的单位之一，所有接受长度值的属性都可以使用百分比单位。但是不同属性使用该单位的效果可能并不一样。百分比单位都需要有一个参照值，也就是说百分比值是一个相对的值。

​		下面来看看常见场景中的百分比单位的使用。

##### 盒模型

​		在 `CSS` 中的盒模型包含的属性有：`width`、`max-width`、`min-width`、`height`、`max-height`、`min-height`、`padding`、`margin` 等。这些属性在使用百分比时，参照物不尽相同：

- `width`、`max-width`、`min-width`：值为百分比时，其相对于包含块的 `width` 进行计算；
- `height`、`max-height`、`min-height`：值为百分比时，其相对于包含块的 `height` 进行计算；
- `padding`、`margin`：值为百分比时，如果是水平的值，就是相对于包含块的 `width` 进行计算；如果是垂直的值，就是相对于包含块的 `height` 进行计算。

##### 文本

​		在 `CSS` 中文本控制的属性有 `font-size`、`line-height`、`vertical-align`、`text-indent` 等。这些属性在使用百分比时，参照物不尽相同：

- `font-size`：根据父元素的 `font-size` 进行计算；
- `line-height`：根据 `font-size` 进行计算；
- `vertical-align`：根据 `line-height` 进行计算；
- `text-indent`：如果是水平的，则根据 `width` 进行计算，如果是垂直的，则根据 `height` 进行计算。

##### 定位

​		在 `CSS` 中用控制 `position` 位置的 `top`、`right`、`bottom`、`left` 都可以使用百分比作为单位。其参照物就是包含块的同方向的 `width` 和 `height`。不同定位的包含块不尽相同：

- 如果元素为静态（ `static` ）或相对定位（ `relative` ），包含块一般是其父容器；
- 如果元素为绝对定位（ `absolute` ），包含块应该是离它最近的 `position` 为 `absolute` 、 `relative` 或 `fixed` 的祖先元素；
- 如果元素为固定定位（ `fixed` ），包含块就是视窗（ `viewport` ）。

##### 变换

​		`CSS` 中的 `transform` 属性中的 `translate` 和 t`ransform-origin` 值也可以设置百分比。

- `translateX()` 根据容器的 `width` 计算
- `translateY()` 根据容器的 `height` 计算
- `transform-origin` 中横坐标（`x`）相对于容器的 `width` 计算；纵坐标（`y`）相对于容器的 `height` 计算

​		注意，在 `translate` 还有一个 `z` 轴的函数 `translateZ()` 。它是不接受百分比为单位的值。

##### 时间

​		时间参考上文。

