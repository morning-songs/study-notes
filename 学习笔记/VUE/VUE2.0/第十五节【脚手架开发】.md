# 脚手架开发

##### 创建并配置项目

项目文件最好不要直接在桌面创建，`cd`切换至根目录，输入`vue create 项目名`创建项目，然后直接配置或输入`vue ui`配置。

##### 运行项目

输入`npm run serve`指令，运行当前项目。

可以在`package.json`文件中，在`scripts`的`serve`指令值后添加`--open`，下次输入指令可自动打开浏览器运行项目。

<hr>

### 项目文件

`vue cli`脚手架内部默认借助`webpack`来进行打包项目。

##### `public`目录

`public`文件夹一般存放初始静态资源，里面默认有`index.html`和`favicon.ico`两个文件。

`vue cli`只对`public`中的`index.html`文件进行打包处理，其他静态资源则是直接复制粘贴。

##### `README.md`文件

项目根目录下的`README.md`文件，用来记录开发者对当前项目的使用描述。

##### 项目配置文件

`Vue CLI`会自动隐藏项目的配置文件。当有特殊需要时，可以在根目录下创建`vue.config.js`文件来自定义配置。

注意：`Vue CLI`和原生`webpack`的配置方式不完全一样，比如：属性名称就不相同。【以`Vue/Cli`官网为主】



#### `src`目录

`src`文件夹是开发者的主要工作目录，也是`vue cli`主要打包的对象。

里面默认存在`assets`，`components`，`App.vue`，`main.js`四个文件。

##### `assets`目录

`assets`目录一般用来存放项目中需要引入的本地静态资源，如：`css`，`js`，图片，音视频等。

注意：

- `Vue CLI`不会对`public`中的静态资源打包处理，但会对`assets`中的内容进行处理。
- 因此，一般静态资源不要存在`public`中，应放在`assets`目录下统一管理。

##### `components`目录

`components`目录一般用来存放一些可复用性的组件，如：全局组件。

##### `App.vue`文件

`App.vue`文件作为项目的根组件，其内容会被直接渲染到`index`页面上。

##### `main.js`文件

`main.js`文件经过打包处理后，会自动被添加到`index.html`中。

<hr>

### 使用组件

##### 使用`App.vue`根组件

```vue
<template>
	<!--template仅作为模板来解析使用，不会渲染到页面中，真正渲染的是其根节点元素-->
	<div>每个组件的根节点元素，有且仅有一个
    	{{name}}---{{age}}
        <button @click="changeAge()">点击修改age</button>
    </div>
</template>
<script>
	export default { // 根组件的配置对象，默认导出的组件实例
        name : 'App', // 根组件名称
        data () { // 根组件的data数据源。在Vue CLI中data基本都是以函数的形式定义的。
            return {
                name : "wanzi",
                age : 14
            };
        },
        methods : {
            changeAge () {
                this.age ++;
            }
        }
    }
</script>
<style lang="less">
	/* 安装css高级语法预处理器loader后，可使用对应的css高级语法，如：less */
</style>
```

<hr>

### 静态资源处理

`Vue CLI`虽然基于`webpack`来打包项目，但也做了很多的修改。比如：配置静态资源时就有所不同。

##### 模板导入资源

例如：在根组件`template`中使用`img`相对路径引入本地图片后，渲染到页面上的图片路径会被转换为绝对路径。

```vue
<!--根组件-->
<template>
	<div>
    	<img src="./assets/avator1.png" /><!--相对地址，引入本地文件-->
        <img src="/avator2.png" /><!--绝对地址，引入本地文件，文件应存在public中（不推荐）-->
    </div>
</template>
<!--渲染到页面后的实际效果-->
<body>
    <div>
    	<img src="/img/avator1.va88798a.png"><!--被转换为绝对地址，存在页面同级的虚拟img目录下-->
        <img src="/avator2.png" /><!--绝对地址引入本地文件时直接复制，会前往public目录下寻找资源-->
	</div>
</body>
```

注意：

- 在各组件任何位置，使用相对路径引入的资源都会被打包处理，然后统一存放在热更新页面同级的对应虚拟目录中。
- 使用绝对路径引入，则不会被打包处理，而是直接复制到页面。页面会直接前往`public`下寻找指定资源【不推荐】
- 对待图片资源的处理，则会根据图片的体积，自动转换输出的文件类型：`base64`格式的文本或者独立的图片文件。



##### 使用`@`引入

仅限在模板结构中引入资源时，可将路径以`@`开头，表示自动到`src`的目录下寻找指定资源【`@`默认指向`src`目录】



##### `js`导入资源

在`template`中使用标签的`src`直接引入资源，实质是被作为模块来解析，相当于在`js`中使用`import`来导入资源。

还可以直接在`data`中使用`require`导入资源，与使用`import`是同样的性质，都是被作为模块来解析打包。

```vue
<template>
	<div>
        <img :src="img1">
        <img src="@/assets/avator1.png"><!--当嵌套层级比较多时，效果明显-->
        <img :src="img2">
    </div>
</template>
<script>
	import img1 from "./assets/avator1.png"
    
    export default {
        name : 'App',
        data () {
            return {
                img1 : img1, // 导出实例对象中，接收img内容
                img2 : require("./assets/avator1.png") // 直接使用require导入
            }
        }
    }
</script>
```



##### 导入`CSS`文件

在组件`style`标签中使用`@import url()`，导入本地`css`文件。【在`<style>`中导入文件必须以分号结束】

```vue
// 组件
<style lang="less">
@import url("./assets/css/common.css");
</style>
```

<hr>

### 项目`demo`

##### 组件划分

每个页面作为一个组件，如：首页面`Home.vue`，购物车页面`ShopCar.vue`等【采用大驼峰式或短线连接】

组件管理：

- 可以在`src`目录下，建立一个用来管理各页面组件的`views`文件夹。
- 各个页面的主要结构，样式，行为等都应提前在各个组件中定义好。
- 由根组件负责决定渲染哪些组件，不应在根组件中定义冗余的代码。



##### 组件导出

在每个组件中使用`export default {}`，导出各个组件的实例对象。



##### 导入组件

在根组件中使用`import...from...`，导入所需组件的实例对象。



##### 注册组件

导入组件实例后，以一个变量接收。然后在当前组件配置对象中，使用`components`注册为其子组件。

```vue
<script>
	import Home from "./views/Home.vue"
	export default {
        name : "App",
        components : {
            // Home : Home, 局部注册的组件名一般与导入的组件名保持一致，因此可简写为一个。
            Home
        }
    }
</script>
```



##### 使用组件

注册好子组件后，便可以直接在`template`模板中使用它们了。【页面结构决定组件关系】

```vue
<template>
	<div id="main">
        <Home></Home>
    </div>
</template>
```



##### 组件调用

每个页面的组件都可以在自身导入可复用组件来使用。但如果是全站页面都需要的组件，建议导入到根组件中使用。

注释：在根组件中使用的固定组件，一定是所有页面都必须展示的。全局组件是任何组件都可使用，但不一定需要。



##### 全局组件

全局组件一般是复用性极高的组件，存在`src`的`components`中，通过`Vue.component`注册。

```js
// 在main.js中，将组件注册为全局组件。
// 导入全局组件实例
import TopNav from "./components/TopNav.vue"
// 注册全局组件
Vue.component("TopNav", TopNav);
```



##### 局部样式

为避免导入多个组件后样式冲突，应在除根组件外的各个组件`style`标签上添加`scoped`属性【限定为局部样式】

当组件的`style`使用了`scoped`属性后，该组件的所有`DOM`元素都会被添加上同一个标识属性，与其他组件区分开。

最后在每个样式上添加属性选择器，以此来实现将这些样式只作用于特定的`DOM`元素。

```html
<!--最终页面-->
<div id="app">
    <div data-v-fa354ga7 id="home">
        <div data-v-fa354ga7 class="topnav"></div>
        <div data-v-fa354ga7 class="swiper"></div>
    </div>
</div>
<!--最终样式-->
<style>
    .topnav[data-v-fa354ga7] {}
    .swiper[data-v-fa354ga7] {}
</style>
```



##### 公共样式

在根组件的`style`中定义的样式，一般作为全站的公共样式来使用【样式过多，可使用文件导入】

<hr>

### 打包项目

输入`npm run build`指令，打包当前项目。在项目根目录下生成一个`dist`文件夹，包含`html`、`css`、`js`、`img`等文件

